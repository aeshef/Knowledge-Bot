ЗАДАЧА: извлечь значения ТОЛЬКО для полей из allowed_fields для выбранного type.

ИСТОЧНИКИ:
- Используй summary.derived (url_text/pdf_text/ocr_text/asr_text), затем summary.raw_text.
- filenames (если даны) можно использовать как подсказку: извлечь автора/название/издание из имени файла при явных сигналах.
- Если информации недостаточно — опусти поле.

ТЕГИ/ENUMS:
- Поля/теги с ограничениями (enums) заполняй ТОЛЬКО допустимыми значениями. Иначе опускай.
- Не добавляй свободные теги (topic/domain) — они выставляются другими узлами.

ВАЛИДНОСТЬ:
- Не возвращай неизвестные поля. Только allowed_fields.
- Значения делай короткими и информативными.

ВЫХОД: JSON с ключами только из allowed_fields (и опционально tags, если явно указано в allowed_fields и enums допускают значения).

СПЕЦИФИКА ПО ТИПАМ (важно):
- Если type = "рецепт":
  - ingredients: массив строк. Извлекай из явного блока "Ингредиенты"; если блока нет — интерпретируй короткие строковые элементы из raw_text как ингредиенты, когда они:
    - содержат названия продуктов ("йогурт", "халуми", "камамбер", "масло") и/или единицы (г, кг, мл, л, шт, ст.л, ч.л, веточка/веточек, зубчик и т.п.);
    - не начинаются с глагола; не являются URL.
  - steps: массив строк. Формируй пошагово из строк, начинающихся с глагола ("нарезать", "обжарить", "смешать", "готовить", "пожарить", "запечь", "перемешать", "выложить", "добавить"), либо из предложений, описывающих действия.
  - Не дублируй ингредиенты в шагах и наоборот; чисти хвостовые символы, сохраняй краткость.
  - cuisine/kind/time: при наличии явных сигналов или из enums.
  - Эвристики:
    - Ингредиенты: распознавай шаблоны вида "число(с суффиксами) + единица + продукт" (напр. "1 камамбер 250г", "розмарин 8 веточек"), а также одиночные наименования продуктов без глаголов ("белый хлеб", "арахис").
    - Шаги: распознавай строки с глаголами повелительной формы/инфинитивами в начале: "приготовить", "смешать", "запечь", "обжарить", "нарезать", "подать", "выложить", "перемешать", "сделать", "добавить".
  - ВАЖНО: Если надёжно извлечь ингредиенты/шаги не удалось — НЕ возвращай ключи ingredients/steps вовсе (чтобы избежать пустых секций).

ПРИМЕРЫ (сокращённо):
1) raw_text:
   "жареный халуми с острым йогуртовым соусом\nгреческий йогурт\nготовить панировку\nготовить соус\nпожарить в панировке"
   allowed_fields включает ["ingredients", "steps", "cuisine", "kind"].
   → {
       "ingredients": ["греческий йогурт", "халуми"],
       "steps": ["готовить панировку", "готовить соус", "пожарить в панировке"]
     }
2) raw_text с блоком "Ингредиенты" и "Шаги" — парси по блокам, сохраняя порядок.
3) raw_text:
   "запеченный камамбер с соусом из розмарина клюквы и орехов\n1 камамбер 250г\nрозмарин 8 веточек\nбелый хлеб\nарахис\n\nприготовить соус\nхлеб с маслом на шпажки\nзапечь камамбер"
   → {
       "ingredients": [
         "камамбер 250г",
         "розмарин 8 веточек",
         "белый хлеб",
         "арахис"
       ],
       "steps": [
         "приготовить соус",
         "хлеб с маслом на шпажки",
         "запечь камамбер"
       ]
     }
